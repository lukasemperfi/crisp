import{S as te,b as O,d as re,f as ne}from"./product-list-2D0aSmFL.js";import{s as F}from"./footer-mnrRef1t.js";const Fe=(r,t)=>new te(r,{...t});function se(r){const{effect:t,swiper:e,on:n,setTranslate:s,setTransition:i,overwriteParams:a,perspective:c,recreateShadows:l,getEffectParams:o}=r;n("beforeInit",()=>{if(e.params.effect!==t)return;e.classNames.push(`${e.params.containerModifierClass}${t}`),c&&c()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const u=a?a():{};Object.assign(e.params,u),Object.assign(e.originalParams,u)}),n("setTranslate _virtualUpdated",()=>{e.params.effect===t&&s()}),n("setTransition",(u,y)=>{e.params.effect===t&&i(y)}),n("transitionEnd",()=>{if(e.params.effect===t&&l){if(!o||!o().slideShadows)return;e.slides.forEach(u=>{u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(y=>y.remove())}),l()}});let d;n("virtualUpdate",()=>{e.params.effect===t&&(e.slides.length||(d=!0),requestAnimationFrame(()=>{d&&e.slides&&e.slides.length&&(s(),d=!1)}))})}function ie(r,t){const e=O(t);return e!==t&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function P(r,t,e){const n=`swiper-slide-shadow${e?`-${e}`:""}${` swiper-slide-shadow-${r}`}`,s=O(t);let i=s.querySelector(`.${n.split(" ").join(".")}`);return i||(i=re("div",n.split(" ")),s.append(i)),i}function xe({swiper:r,extendParams:t,on:e}){t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),se({effect:"coverflow",swiper:r,on:e,setTranslate:()=>{const{width:i,height:a,slides:c,slidesSizesGrid:l}=r,o=r.params.coverflowEffect,d=r.isHorizontal(),u=r.translate,y=d?-u+i/2:-u+a/2,b=d?o.rotate:-o.rotate,_=o.depth,m=ne(r);for(let g=0,w=c.length;g<w;g+=1){const p=c[g],x=l[g],J=p.swiperSlideOffset,R=(y-J-x/2)/x,h=typeof o.modifier=="function"?o.modifier(R):R*o.modifier;let C=d?b*h:0,q=d?0:b*h,N=-_*Math.abs(h),E=o.stretch;typeof E=="string"&&E.indexOf("%")!==-1&&(E=parseFloat(o.stretch)/100*x);let L=d?0:E*h,M=d?E*h:0,k=1-(1-o.scale)*Math.abs(h);Math.abs(M)<.001&&(M=0),Math.abs(L)<.001&&(L=0),Math.abs(N)<.001&&(N=0),Math.abs(C)<.001&&(C=0),Math.abs(q)<.001&&(q=0),Math.abs(k)<.001&&(k=0);const Q=`translate3d(${M}px,${L}px,${N}px)  rotateX(${m(q)}deg) rotateY(${m(C)}deg) scale(${k})`,ee=ie(o,p);if(ee.style.transform=Q,p.style.zIndex=-Math.abs(Math.round(h))+1,o.slideShadows){let v=d?p.querySelector(".swiper-slide-shadow-left"):p.querySelector(".swiper-slide-shadow-top"),$=d?p.querySelector(".swiper-slide-shadow-right"):p.querySelector(".swiper-slide-shadow-bottom");v||(v=P("coverflow",p,d?"left":"top")),$||($=P("coverflow",p,d?"right":"bottom")),v&&(v.style.opacity=h>0?h:0),$&&($.style.opacity=-h>0?-h:0)}}},setTransition:i=>{r.slides.map(c=>O(c)).forEach(c=>{c.style.transitionDuration=`${i}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${i}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}class ae{getTags=async()=>{const{data:t,error:e}=await F.from("product_tags").select("id, name, sort_order").order("sort_order",{ascending:!0});if(e)throw console.error("Error fetching tags:",e),e;return t};getFilters=async()=>{try{const[t,e,n,s,i,a]=await Promise.all([F.from("brands").select("*").order("name"),F.from("product_colors").select("*").order("name"),F.from("product_sizes").select("*").order("sort_order"),F.from("product_lengths").select("*").order("sort_order"),this.getTags(),F.rpc("get_price_range")]);return{brands:t.data,colors:e.data,sizes:n.data,tags:i,lengths:s.data,priceRange:a.data}}catch(t){console.error(t)}}}const Ee=new ae;class ce{constructor(t,e,n={}){if(this._container=typeof t=="string"?document.querySelector(t):t,!this._container)throw new Error("FilterPanel: container not found");this._config=e,this._state={},this._listeners={change:[],apply:[]},this._showSelectedFilters=n.showSelectedFilters!==!1,this._showApplyButton=n.showApplyButton!==!1,this._handleChange=this._onChange.bind(this),this._handleClick=this._onClick.bind(this),this._renderPanel(),this._applyDefaultValues(),this._bindEvents()}getFilters(){return structuredClone(this._state)}onChange(t){this._listeners.change.push(t)}onApply(t){this._listeners.apply.push(t)}reset(){this._state={},this._container.querySelectorAll("input[type='checkbox']").forEach(t=>t.checked=!1),this._container.querySelectorAll(".price-range").forEach(t=>{const e=t.querySelector(".price-range__input_min"),n=t.querySelector(".price-range__input_max");e&&n&&(e.value=e.min,n.value=n.max,this._updatePriceRangeUI(t))}),this._renderSelectedFilters(),this._emit("change")}destroy(){this._panel.removeEventListener("change",this._handleChange),this._panel.removeEventListener("click",this._handleClick)}_emit(t){const e=this.getFilters();this._listeners[t].forEach(n=>n(e))}_bindEvents(){this._panel.addEventListener("change",this._handleChange),this._panel.addEventListener("click",this._handleClick)}_onClick(t){t.target.closest(".filter-panel__apply-btn")&&this._emit("apply")}_onChange(t){const e=t.target;if(e){if(e.type==="checkbox"){if(!e.name)return;this._updateCheckbox(e)}e.type==="range"&&this._updateRange(e),this._renderSelectedFilters(),this._emit("change")}}_updateCheckbox(t){const{name:e,value:n,checked:s}=t,a=this._config.find(l=>l.id===e)?.singleSelect===!0;Array.isArray(this._state[e])||(this._state[e]=[]);const c=isNaN(n)?n:Number(n);if(s)if(a){const l=this._container.querySelector(`[data-filter-id="${e}"]`);l&&l.querySelectorAll("input[type='checkbox']").forEach(o=>{o!==t&&(o.checked=!1)}),this._state[e]=[c]}else this._state[e].includes(c)||this._state[e].push(c);else this._state[e]=this._state[e].filter(l=>l!==c);this._state[e].length===0&&delete this._state[e]}_updateRange(t){const e=t.closest(".price-range");if(!e)return;const n=e.dataset.filterId;if(!n)return;const s=e.querySelector(".price-range__input_min"),i=e.querySelector(".price-range__input_max");!s||!i||(this._state[n]={min:parseFloat(parseFloat(s.value).toFixed(2)),max:parseFloat(parseFloat(i.value).toFixed(2))})}_renderPanel(){this._container.innerHTML="",this._panel=document.createElement("div"),this._panel.className="filter-panel";const t=document.createElement("div");t.className="filter-panel__selected";const e=document.createElement("div");e.className="filter-panel__filters",this._config.forEach(n=>{const s=this._createFilterContent(n),i=this._createFilterItem({title:n.title,content:s,isOpen:n.defaultOpen,accordion:n.accordion!==!1});e.appendChild(i)}),this._showApplyButton&&e.appendChild(this._createApplyButton()),this._panel.appendChild(t),this._panel.appendChild(e),this._container.appendChild(this._panel)}_applyDefaultValues(){this._config.forEach(t=>{if(t.defaultValue&&(Array.isArray(t.defaultValue)&&t.defaultValue.forEach(e=>{const n=this._container.querySelector(`input[name="${t.id}"][value="${e}"]`);n&&(n.checked=!0,this._updateCheckbox(n))}),typeof t.defaultValue=="object")){const e=this._container.querySelector(`[data-filter-id="${t.id}"]`);if(!e)return;const n=e.querySelector(".price-range__input_min"),s=e.querySelector(".price-range__input_max");n&&s&&(n.value=t.defaultValue.min,s.value=t.defaultValue.max,this._updateRange(n),e.dispatchEvent(new Event("input")))}}),this._renderSelectedFilters()}_createApplyButton(t="APPLY"){const e=document.createElement("div");e.className="filter-panel__footer";const n=document.createElement("button");return n.classList.add("button","button_elevated","button_gray","filter-panel__apply-btn"),n.textContent=t,e.appendChild(n),e}_createAccordionItem({title:t,content:e,isOpen:n}){const s=document.createElement("div");return s.className="filter-panel__item filter-item",n&&s.classList.add("filter-item_is-open"),s.innerHTML=`
      <div class="filter-item__header">
        <h3 class="filter-item__title">${t}</h3>
        <span class="filter-item__icon"></span>
      </div>
      <div class="filter-item__body">
        <div class="filter-item__content"></div>
      </div>
    `,s.querySelector(".filter-item__content").appendChild(e),s.querySelector(".filter-item__header").addEventListener("click",()=>{s.classList.toggle("filter-item_is-open")}),s}_createStaticItem({title:t,content:e}){const n=document.createElement("div");return n.className="filter-panel__item filter-item filter-item_static",n.innerHTML=`
      <div class="filter-item__title">${t}</div>
      <div class="filter-item__body">
        <div class="filter-item__content"></div>
    </div>
    `,n.querySelector(".filter-item__content").appendChild(e),n}_createFilterItem({title:t,content:e,isOpen:n=!0,accordion:s=!0}){return s?this._createAccordionItem({title:t,content:e,isOpen:n}):this._createStaticItem({title:t,content:e})}_createFilterContent(t){const n={"checkbox-list":this._createCheckboxList,"size-grid":this._createSizeGrid,"color-grid":this._createColorGrid,"price-range":this._createPriceRange}[t.type];if(!n)return document.createElement("div");const s=n.call(this,t);return s.dataset.filterId=t.id,s}_createCheckboxList(t){const e=document.createElement("div");return e.className="filter-checkbox-list",t.options.forEach(n=>{const s=document.createElement("label");s.className="filter-checkbox-list__label-wrapper",s.innerHTML=`
          <input type="checkbox" class="filter-checkbox-list__input" name="${t.id}" value="${n.id}">
          <span class="filter-checkbox-list__box"></span> <span class="filter-checkbox-list__label">${n.name}</span>
        `,e.appendChild(s)}),e}_createSelectionGrid(t,e,n=!1){const s=document.createElement("div");return s.className=e,t.options.forEach(i=>{const a=document.createElement("label");a.className=`${e}__item`;const c=(i.hex_code||"").toLowerCase(),l=c==="#ffffff"||c==="#fff"||c==="white",o=n?`style="background-color: ${i.hex_code}"`:"",d=n&&l?`${e}__box_is-white`:"";a.innerHTML=`
          <input type="checkbox" class="${e}__input" name="${t.id}" value="${i.id}">
          <span class="${e}__box ${d}" ${o}>${n?"":i.name}</span>
        `,s.appendChild(a)}),s}_createSizeGrid(t){return this._createSelectionGrid(t,"size-grid")}_createColorGrid(t){return this._createSelectionGrid(t,"color-grid",!0)}_createPriceRange(t){const e=document.createElement("div");e.className="price-range";const n=t.options[0],s=n.min||0,i=n.max||1e3,a=10;e.innerHTML=`
        <div class="price-range__values">
          <span class="price-range__value price-range__value_min"></span>
          <span class="price-range__value price-range__value_max"></span>
        </div>
        <div class="price-range__slider">
          <div class="price-range__track"></div>
          <input type="range" class="price-range__input price-range__input_min" min="${s}" max="${i}" value="${s}" step="any">
          <input type="range" class="price-range__input price-range__input_max" min="${s}" max="${i}" value="${i}" step="any">
        </div>
      `;const c=e.querySelector(".price-range__input_min"),l=e.querySelector(".price-range__input_max"),o=e.querySelector(".price-range__value_min"),d=e.querySelector(".price-range__value_max"),u=e.querySelector(".price-range__track"),y=b=>{let _=parseFloat(c.value),m=parseFloat(l.value);m-_<a&&(b?.target.classList.contains("price-range__input_min")?(_=m-a,c.value=_):(m=_+a,l.value=m));let g=Math.round(_/a)*a,w=Math.round(m/a)*a;g=Math.max(s,Math.min(i,g)),w=Math.max(s,Math.min(i,w)),m-_<=a&&(b?.target.classList.contains("price-range__input_min")?g=w-a:w=g+a),o.textContent=`${g.toFixed(2)} EUR`,d.textContent=`${w.toFixed(2)} EUR`;const p=(_-s)/(i-s)*100,x=(m-s)/(i-s)*100;u.style.left=p+"%",u.style.right=100-x+"%"};return e.addEventListener("input",y),e.addEventListener("change",()=>{const b=Math.round(c.value/a)*a,_=Math.round(l.value/a)*a;c.value=b.toFixed(2),l.value=_.toFixed(2),y()}),y(),e}_updatePriceRangeUI(t){const e=t.querySelector(".price-range__input_min"),n=t.querySelector(".price-range__input_max"),s=t.querySelector(".price-range__value_min"),i=t.querySelector(".price-range__value_max"),a=t.querySelector(".price-range__track"),c=parseFloat(e.min),l=parseFloat(n.max);s.textContent=`${c.toFixed(2)} EUR`,i.textContent=`${l.toFixed(2)} EUR`,a.style.left="0%",a.style.right="0%"}_renderSelectedFilters(){const t=this._container.querySelector(".filter-panel__selected");if(t.innerHTML="",!this._showSelectedFilters){t.style.display="none";return}const e=this.getFilters();if(Object.keys(e).length===0){t.style.display="none";return}t.style.display="block";const s=this._createSelectedFiltersWrapper(),i=this._createSelectedFiltersHeader(),a=this._createSelectedFiltersList(e);s.appendChild(i),s.appendChild(a),t.appendChild(s)}_createSelectedFiltersWrapper(){const t=document.createElement("div");return t.className="selected-filters",t}_createSelectedFiltersHeader(){const t=document.createElement("div");return t.className="selected-filters__header",t.innerHTML=`
    <div class="selected-filters__title">Filter</div>
    <button class="selected-filters__reset-btn">${this._closeIcon()} reset all</button>
  `,t.querySelector(".selected-filters__reset-btn").addEventListener("click",()=>this.reset()),t}_createSelectedFiltersList(t){const e=document.createElement("div");e.className="selected-filters__main";const n=document.createElement("div");return n.className="selected-filters__list",Object.keys(t).forEach(s=>{const i=this._createSelectedFilterItem(s,t[s]);n.appendChild(i)}),e.appendChild(n),e}_createSelectedFilterItem(t,e){const n=document.createElement("div");n.className="selected-filters__list-item list-item";const s=document.createElement("div");s.className="list-item__title";const i=this._config.find(c=>c.id===t);s.textContent=i?.title||t,n.appendChild(s);const a=document.createElement("div");return a.className="list-item__values values",Array.isArray(e)?e.forEach(c=>{a.appendChild(this._createSelectedFilterValue(t,c))}):typeof e=="object"&&a.appendChild(this._createSelectedFilterRange(t,e)),n.appendChild(a),n}_createSelectedFilterValue(t,e){const n=this._config.find(a=>a.id===t),s=n?.type==="color-grid",i=document.createElement("div");if(i.className="values__item",s){const c=n.options.find(d=>d.id===e)?.hex_code.toLowerCase()||"#000",o=c=="#ffffff"||c=="#fff"||c=="white"?"color-grid__box_is-white":"";i.innerHTML=`
     <button class="values__item-remove-btn">${this._closeIcon()}<div class="color-grid__item">
          <span class="color-grid__box color-grid__box_selected-secondary ${o}" style="background-color: ${c}"></span>
      </div></button>

    `}else i.innerHTML=`
      <button class="values__item-remove-btn">${this._closeIcon()}<div class="values__label">${this._getOptionLabel(t,e)}</div></button>
      
    `;return i.querySelector(".values__item-remove-btn").addEventListener("click",()=>this._removeSelectedFilter(t,e)),i}_createSelectedFilterRange(t,e){const n=document.createElement("div");return n.className="values__item",n.innerHTML=`
    <button class="values__item-remove-btn">${this._closeIcon()}
    <div class="values__label">${e.min} - ${e.max} EUR</div><button class="values__item-remove-btn">
  `,n.querySelector(".values__item-remove-btn").addEventListener("click",()=>this._removeSelectedFilter(t)),n}_getOptionLabel(t,e){const n=this._config.find(i=>i.id===t);return!n||!n.options?e:n.options.find(i=>i.id===e)?.name||e}_removeSelectedFilter(t,e=null){const n=this._container.querySelector(`[data-filter-id="${t}"]`);if(n){if(e!==null){const s=n.querySelector(`input[value="${e}"]`);s&&(s.checked=!1,this._updateCheckbox(s))}else{const s=n.querySelector(".price-range__input_min"),i=n.querySelector(".price-range__input_max");s&&i&&(s.value=s.min,i.value=i.max,delete this._state[t],this._updatePriceRangeUI(n))}this._renderSelectedFilters(),this._emit("change")}}_closeIcon(t=""){return`
    <svg class="selected-filters__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.15 -0.15 9.49 9.49"><path d="M8.83887 0.353516L0.353586 8.8388" stroke="black"></path><path d="M8.83887 8.83887L0.353587 0.353585" stroke="black"></path></svg>
    `}}function ve(r,t,e){const{showAboutDresses:n=!0,...s}=e,i=typeof r=="string"?document.querySelector(r):r;if(!i)throw new Error("FiltersBar: container not found");i.innerHTML=`
    <div class="filters-bar">
      <button class="filters-bar__toggle">
        <span class="filters-bar__value">Filter</span>
       ${oe("filters-bar__icon")}
      </button>
      <div class="filters-bar__content">
        <div class="filters-bar__filters"></div>
        <div class="filters-bar__category-description"></div>
      </div>
    </div>
  `;const a=i.querySelector(".filters-bar"),c=new ce(a.querySelector(".filters-bar__filters"),t,s);return n&&le(a.querySelector(".filters-bar__category-description")),a.querySelector(".filters-bar__toggle").addEventListener("click",()=>{a.classList.toggle("filters-bar_is-open")}),c}function le(r,t={}){const{className:e=""}=t,n=typeof r=="string"?document.querySelector(r):r;if(!n)throw new Error("AboutDresses: container not found");(()=>{n.innerHTML=`
        <div class="about-dresses ${e}">
          <h3 class="about-dresses__title">About Dresses</h3>
          <p class="about-dresses__text">
            Every day we’re gonna be dropping the latest trends to help you nail every Summer sitch. Whether it’s a
            graduation, your mate's wedding, or just a cute day at the races with the gals, our occasion dresses
            have got you covered. Not looking for something fancy? No stress. We’ve got day dresses for days (aka
            bodycon dresses, t-shirt dresses, oversized shirt dresses).
          </p>
        </div>
      `})()}function oe(r=""){return`
  <svg class="${r}" width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0.353516 0.353516L4.35352 4.35352L8.35352 0.353516" stroke="black" />
  </svg>
  `}const B="%[a-f0-9]{2}",U=new RegExp("("+B+")|([^%]+?)","gi"),H=new RegExp("("+B+")+","gi");function A(r,t){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;t=t||1;const e=r.slice(0,t),n=r.slice(t);return Array.prototype.concat.call([],A(e),A(n))}function de(r){try{return decodeURIComponent(r)}catch{let t=r.match(U)||[];for(let e=1;e<t.length;e++)r=A(t,e).join(""),t=r.match(U)||[];return r}}function fe(r){const t={"%FE%FF":"��","%FF%FE":"��"};let e=H.exec(r);for(;e;){try{t[e[0]]=decodeURIComponent(e[0])}catch{const s=de(e[0]);s!==e[0]&&(t[e[0]]=s)}e=H.exec(r)}t["%C2"]="�";const n=Object.keys(t);for(const s of n)r=r.replace(new RegExp(s,"g"),t[s]);return r}function ue(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return decodeURIComponent(r)}catch{return fe(r)}}function _e(r,t){const e={};if(Array.isArray(t))for(const n of t){const s=Object.getOwnPropertyDescriptor(r,n);s?.enumerable&&Object.defineProperty(e,n,s)}else for(const n of Reflect.ownKeys(r)){const s=Object.getOwnPropertyDescriptor(r,n);if(s.enumerable){const i=r[n];t(n,i,r)&&Object.defineProperty(e,n,s)}}return e}function D(r,t){if(!(typeof r=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r===""||t==="")return[];const e=r.indexOf(t);return e===-1?[]:[r.slice(0,e),r.slice(e+t.length)]}const pe=r=>r==null,he=r=>encodeURIComponent(r).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),I=Symbol("encodeFragmentIdentifier");function me(r){switch(r.arrayFormat){case"index":return t=>(e,n)=>{const s=e.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?e:n===null?[...e,[f(t,r),"[",s,"]"].join("")]:[...e,[f(t,r),"[",f(s,r),"]=",f(n,r)].join("")]};case"bracket":return t=>(e,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?e:n===null?[...e,[f(t,r),"[]"].join("")]:[...e,[f(t,r),"[]=",f(n,r)].join("")];case"colon-list-separator":return t=>(e,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?e:n===null?[...e,[f(t,r),":list="].join("")]:[...e,[f(t,r),":list=",f(n,r)].join("")];case"comma":case"separator":case"bracket-separator":{const t=r.arrayFormat==="bracket-separator"?"[]=":"=";return e=>(n,s)=>s===void 0||r.skipNull&&s===null||r.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[f(e,r),t,f(s,r)].join("")]:[[n,f(s,r)].join(r.arrayFormatSeparator)])}default:return t=>(e,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?e:n===null?[...e,f(t,r)]:[...e,[f(t,r),"=",f(n,r)].join("")]}}function ge(r){let t;switch(r.arrayFormat){case"index":return(e,n,s)=>{if(t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),!t){s[e]=n;return}s[e]===void 0&&(s[e]={}),s[e][t[1]]=n};case"bracket":return(e,n,s)=>{if(t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),!t){s[e]=n;return}if(s[e]===void 0){s[e]=[n];return}s[e]=[...s[e],n]};case"colon-list-separator":return(e,n,s)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){s[e]=n;return}if(s[e]===void 0){s[e]=[n];return}s[e]=[...s[e],n]};case"comma":case"separator":return(e,n,s)=>{const a=typeof n=="string"&&n.includes(r.arrayFormatSeparator)?n.split(r.arrayFormatSeparator).map(c=>S(c,r)):n===null?n:S(n,r);s[e]=a};case"bracket-separator":return(e,n,s)=>{const i=/(\[])$/.test(e);if(e=e.replace(/\[]$/,""),!i){s[e]=n&&S(n,r);return}const a=n===null?[]:S(n,r).split(r.arrayFormatSeparator);if(s[e]===void 0){s[e]=a;return}s[e]=[...s[e],...a]};default:return(e,n,s)=>{if(s[e]===void 0){s[e]=n;return}s[e]=[...[s[e]].flat(),n]}}}function z(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(r,t){return t.encode?t.strict?he(r):encodeURIComponent(r):r}function S(r,t){return t.decode?ue(r):r}function W(r){return Array.isArray(r)?r.sort():typeof r=="object"?W(Object.keys(r)).sort((t,e)=>Number(t)-Number(e)).map(t=>r[t]):r}function G(r){const t=r.indexOf("#");return t!==-1&&(r=r.slice(0,t)),r}function ye(r){let t="";const e=r.indexOf("#");return e!==-1&&(t=r.slice(e)),t}function V(r,t,e){return e==="string"&&typeof r=="string"?r:typeof e=="function"&&typeof r=="string"?e(r):e==="boolean"&&r===null?!0:e==="boolean"&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")?r.toLowerCase()==="true":e==="boolean"&&r!==null&&(r.toLowerCase()==="1"||r.toLowerCase()==="0")?r.toLowerCase()==="1":e==="string[]"&&t.arrayFormat!=="none"&&typeof r=="string"?[r]:e==="number[]"&&t.arrayFormat!=="none"&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?[Number(r)]:e==="number"&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?Number(r):t.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")?r.toLowerCase()==="true":t.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?Number(r):r}function T(r){r=G(r);const t=r.indexOf("?");return t===-1?"":r.slice(t+1)}function j(r,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...t},z(t.arrayFormatSeparator);const e=ge(t),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;for(const s of r.split("&")){if(s==="")continue;const i=t.decode?s.replaceAll("+"," "):s;let[a,c]=D(i,"=");a===void 0&&(a=i),c=c===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?c:S(c,t),e(S(a,t),c,n)}for(const[s,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&t.types[s]!=="string")for(const[a,c]of Object.entries(i)){const l=t.types[s],o=typeof l=="function"?l:l?l.replace("[]",""):void 0;i[a]=V(c,t,o)}else typeof i=="object"&&i!==null&&t.types[s]==="string"?n[s]=Object.values(i).join(t.arrayFormatSeparator):n[s]=V(i,t,t.types[s]);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((s,i)=>{const a=n[i];return s[i]=a&&typeof a=="object"&&!Array.isArray(a)?W(a):a,s},Object.create(null))}function K(r,t){if(!r)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},z(t.arrayFormatSeparator);const e=a=>t.skipNull&&pe(r[a])||t.skipEmptyString&&r[a]==="",n=me(t),s={};for(const[a,c]of Object.entries(r))e(a)||(s[a]=c);const i=Object.keys(s);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let c=r[a];if(t.replacer&&(c=t.replacer(a,c),c===void 0)||c===void 0)return"";if(c===null)return f(a,t);if(Array.isArray(c)){if(c.length===0&&t.arrayFormat==="bracket-separator")return f(a,t)+"[]";let l=c;return t.replacer&&(l=c.map((o,d)=>t.replacer(`${a}[${d}]`,o)).filter(o=>o!==void 0)),l.reduce(n(a),[]).join("&")}return f(a,t)+"="+f(c,t)}).filter(a=>a.length>0).join("&")}function Y(r,t){t={decode:!0,...t};let[e,n]=D(r,"#");return e===void 0&&(e=r),{url:e?.split("?")?.[0]??"",query:j(T(r),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:S(n,t)}:{}}}function X(r,t){t={encode:!0,strict:!0,[I]:!0,...t};const e=G(r.url).split("?")[0]||"",n=T(r.url),s={...j(n,{sort:!1,...t}),...r.query};let i=K(s,t);i&&=`?${i}`;let a=ye(r.url);if(typeof r.fragmentIdentifier=="string"){const c=new URL(e);c.hash=r.fragmentIdentifier,a=t[I]?c.hash:`#${r.fragmentIdentifier}`}return`${e}${i}${a}`}function Z(r,t,e){e={parseFragmentIdentifier:!0,[I]:!1,...e};const{url:n,query:s,fragmentIdentifier:i}=Y(r,e);return X({url:n,query:_e(s,t),fragmentIdentifier:i},e)}function be(r,t,e){const n=Array.isArray(t)?s=>!t.includes(s):(s,i)=>!t(s,i);return Z(r,n,e)}const $e=Object.freeze(Object.defineProperty({__proto__:null,exclude:be,extract:T,parse:j,parseUrl:Y,pick:Z,stringify:K,stringifyUrl:X},Symbol.toStringTag,{value:"Module"}));export{xe as E,ve as F,Fe as i,Ee as p,$e as q};
