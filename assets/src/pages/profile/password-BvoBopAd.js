import{i as l,a as d,l as S}from"../../../footer-DhrWEGpA.js";import{i as m}from"../../../dropdown-Etj7YRTy.js";import{i as R}from"../../../breadcrumbs-k0QsKmE3.js";import{i as u}from"../../../profile-section-Lnmzs4iE.js";import{J as O,R as a,P as i,c as f}from"../../../rules-BILaquOo.js";import{a as p}from"../../../auth-guard-YOWXcCuk.js";import"../../../breadcrumbs-CCIHsRy6.js";const e={FORM:"#password-form",CURRENT_PASSWORD:"#password-current_password",PASSWORD:"#password-new_password",CONFIRM_PASSWORD:"#password-confirm_password"},_={validator:(t,r)=>{if(r[e.PASSWORD]&&r[e.PASSWORD].elem){const o=r[e.PASSWORD].elem.value;return t===o}return!0},errorMessage:"Пароли должны быть одинаковыми"},n={[e.CURRENT_PASSWORD]:[a,i],[e.PASSWORD]:[a,i],[e.CONFIRM_PASSWORD]:[a,_]};function P(){const t={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new O(e.FORM,t);for(const o in n)r.addField(o,n[o]);return r}const D=()=>{P().onSuccess(async t=>{t.preventDefault();const r=document.querySelector(e.FORM),o=new FormData(r);Object.fromEntries(o.entries());const s=f({successText:"Данные изменены успешно!"});try{s.success(),setTimeout(()=>{window.location.reload()},1e3)}catch(c){console.error("Ошибка при обновлении профиля:",c),s.hide()}})};document.addEventListener("DOMContentLoaded",async()=>{await p(),m({selector:".top-header__lang"}),l(),R(),u(),D(),d(),S(".lazy",{rootMargin:"200px 0px"})});
