import{d as c,s as m,A as a,i as u,a as f,l as E}from"../../footer-Dv3gA37Q.js";import{r as L}from"../../auth-guard-DJIKdLsP.js";import{i as S}from"../../dropdown-Etj7YRTy.js";import{i as _}from"../../breadcrumbs-CCIHsRy6.js";import{J as p,R as t,E as g,P as F,c as R}from"../../rules-BILaquOo.js";import{r as D}from"../../redirect-7MlKBWST.js";const O=()=>{_(".login-page-breadcrumbs__container","breadcrumbs_color_muted")},e={FORM:"#login-form",EMAIL:"#login-email",PASSWORD:"#login-password"};function b(){const o={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new p(e.FORM,o);return r.addField(e.EMAIL,[t,g]).addField(e.PASSWORD,[t,F]),r}let A="/nuts/";const y=()=>{const o=R({successText:"Вы успешно вошли в систему!"}),r=b();r.onSuccess(async s=>{s.preventDefault();const i=document.querySelector(e.FORM),n=new FormData(i),{email:l,password:d}=Object.fromEntries(n.entries());await c(l,d)}),m.subscribe("auth",async s=>{s.status===a.LOADING&&o.show(),s.status===a.SUCCEEDED&&(o.success(),D(A,2e3)),s.status===a.FAILED&&(r.showErrors({[e.EMAIL]:""}),r.showErrors({[e.PASSWORD]:"Неверный пароль или email"}),o.hide())})};document.addEventListener("DOMContentLoaded",async()=>{await L(),S({selector:".top-header__lang"}),u(),O(),y(),f(),E(".lazy",{rootMargin:"200px 0px"})});
