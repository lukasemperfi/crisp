import{b as y,p as v,i as x,a as E}from"../../footer-DnGZcwvZ.js";import{l as B}from"../../lazy-loading-Cecxv2lM.js";import{i as L,E as k,p as F,F as N,q as $}from"../../base-C39IE0Pb.js";import{N as z,P as O,a as C}from"../../product-list-BaWWwkY4.js";import{D as P}from"../../dropdown-CrR65zuz.js";const A=()=>{L(".hero-slider",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,initialSlide:1,speed:600,preventClicks:!0,slidesPerView:"2",loop:!0,coverflowEffect:{rotate:0,stretch:65,depth:163,modifier:1,slideShadows:!1},breakpoints:{0:{coverflowEffect:{stretch:52}},550:{coverflowEffect:{stretch:65}}},modules:[k,z,O],navigation:{prevEl:".hero-slider__nav-left",nextEl:".hero-slider__nav-right"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,r){return`<span class="${r}"></span>`}}})},R=({pictureProps:t={},textBlockProps:r={},className:e=""})=>{const o=f=>{const{jpgSrc:m,webpSrc:a,mobileJpgSrc:l,mobileWebpSrc:p,alt:s="",className:c="banner__img",breakpoint:i=650,loading:g="eager",fetchpriority:b="auto"}=f,u=g!=="eager",h=`(max-width: ${i}px)`,w=u?"data-":"";return`
          <picture>
            ${p?`<source media="${h}" type="image/webp" ${w}srcset="${y}${p}">`:""}
            ${l?`<source media="${h}" type="image/jpeg" ${w}srcset="${y}${l}">`:""}
            <source type="image/webp" ${w}srcset="${y}${a}">
            <img 
              class="${c} ${u?"lazy":""}" 
              alt="${s}" 
              ${g==="eager"?'loading="eager"':""} 
              fetchpriority="${b}" 
              ${u?`data-src="${m}"`:`src="${m}"`}
            >
          </picture>
        `},n=f=>{const{title:m="EXPLORE THE BEST OF YOU.",text:a="You can choose the best option for you, and it does not matter whether you are in Prague or San Francisco.",buttonText:l="shop now"}=f;return`
          <div class="text-block">
            <div class="text-block__title">${m}</div>
            <div class="text-block__text">${a}</div>
            <button class="button button_outlined">${l}</button>
          </div>
        `},d=document.createElement("div");return d.className=`banner ${e}`.trim(),d.innerHTML=`
      <div class="banner__wrapper">
        ${o({...t,className:"banner__img"})}
        ${n(r)}
      </div>
    `,d},D=async()=>{const t=U(window.location.search),r={page:0,limit:24,sort:"price_desc"};let e={page:t.page??r.page,limit:t.limit??r.limit,sort:t.sort??r.sort};const o=i=>{const g={limit:e.limit,sort:e.sort,...i,page:0},b=_(g,r),u=S(b);u?window.location.search=u:window.location.href=window.location.pathname},n=await F.getFilters(),d=[{id:"brand",title:"Brand",type:"checkbox-list",defaultOpen:!0,options:n.brands,defaultValue:t.brand||[]},{id:"size",title:"Size (Inches)",type:"size-grid",defaultOpen:!0,options:n.sizes,defaultValue:t.size||[]},{id:"length",title:"Dress length",type:"checkbox-list",defaultOpen:!0,options:n.lengths,defaultValue:t.length||[]},{id:"color",title:"Color",type:"color-grid",defaultOpen:!0,options:n.colors,defaultValue:t.color||[]},{id:"price",title:"Price",type:"price-range",defaultOpen:!0,options:n.priceRange,defaultValue:t.price||null}],f=new N(".products__aside",d,{showSelectedFilters:!0});P(".products__sort"),P(".products__limit"),f.onApply(i=>{o(i)});const m=i=>{const g={...t,page:i},b=_(g,r),u=S(b),h=u?`?${u}`:window.location.pathname;window.history.pushState({path:h},"",h)};let a=e.page;const p=R({className:"catalog__list-banner full-width",pictureProps:{jpgSrc:"images/catalog-page/list-banner-desktop.jpg",webpSrc:"images/catalog-page/list-banner-desktop.webp",mobileJpgSrc:"images/catalog-page/list-banner-mobile.jpg",mobileWebpSrc:"images/catalog-page/list-banner-mobile.webp",alt:"New Collection"},textBlockProps:{title:"Shopping without limits.",text:"You can choose the best option for you, and it does not matter whether you are in Prague or San Francisco. We will deliver your purchase anywhere!",buttonText:"Shop Now"}}),s=async()=>{const{data:i,count:g}=await v.getAllProducts({...t,page:a,limit:e.limit,sort:e.sort});console.log("data",i),c.appendProducts(i),j(p),(a!==e.page||a>0)&&m(a),(a+1)*e.limit>=g?c.hideLoadMore():c.showLoadMore(),a++},c=new C(".products__list",[],s);await s()},T={arrayFormat:"comma",skipEmptyString:!0,skipNull:!0},S=t=>{const r={...t};return t.price&&(r.minPrice=t.price.min,r.maxPrice=t.price.max,delete r.price),$.stringify(r,T)},U=t=>{const e={...$.parse(t,{arrayFormat:"comma",parseNumbers:!0,parseBooleans:!0})};return(e.minPrice!==void 0||e.maxPrice!==void 0)&&(e.price={min:Number(e.minPrice)||0,max:Number(e.maxPrice)||0},delete e.minPrice,delete e.maxPrice),["brand","size","length","color"].forEach(n=>{e[n]&&!Array.isArray(e[n])&&(e[n]=[e[n]])}),e},_=(t,r)=>{const e={...t};return Object.keys(r).forEach(o=>{e[o]===r[o]&&delete e[o]}),e};function q({listSelector:t,element:r,insertAfterRow:e=2}){const o=document.querySelector(t);if(!o){console.error("insertBannerIntoList: container not found.");return}if(!r){console.error("insertBannerIntoList: element not found.");return}o.contains(r)&&o.removeChild(r);const n=Array.from(o.children);if(n.length===0)return;const d=m(n);if(d.length<e)return;const f=d[e-1].slice(-1)[0];o.insertBefore(r,f.nextSibling);function m(a){const l=[];let p=null,s=[];return a.forEach(c=>{const i=Math.round(c.getBoundingClientRect().top);if(p===null){p=i,s.push(c);return}i===p?s.push(c):(l.push(s),s=[c],p=i)}),s.length&&l.push(s),l}}function j(t){const r=()=>{q({listSelector:".catalog__list",element:t,insertAfterRow:2})},e=document.querySelector(".catalog__list");if(!e)return;r(),new ResizeObserver(()=>{r()}).observe(e)}document.addEventListener("DOMContentLoaded",async()=>{x(),A(),D(),E(),B(".lazy",{rootMargin:"200px 0px"})});
