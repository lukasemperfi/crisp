import{P as v,i as $,a as x,l as E}from"../../color-CyiGwVGT.js";import{i as N,E as k,N as F,p as L,F as z,P as B,q as S,a as O}from"../../base-CBqjAGzD.js";import{D as y}from"../../dropdown-WIquePbl.js";const C=()=>{N(".hero-slider",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,initialSlide:1,speed:600,preventClicks:!0,slidesPerView:"2",loop:!0,coverflowEffect:{rotate:0,stretch:65,depth:163,modifier:1,slideShadows:!1},breakpoints:{0:{coverflowEffect:{stretch:52}},550:{coverflowEffect:{stretch:65}}},modules:[k,F,v],navigation:{prevEl:".hero-slider__nav-left",nextEl:".hero-slider__nav-right"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,r){return`<span class="${r}"></span>`}}})},A=({pictureProps:t={},textBlockProps:r={},className:e=""})=>{const o=g=>{const{jpgSrc:u,webpSrc:n,mobileJpgSrc:c,mobileWebpSrc:m,alt:a="",className:p="banner__img",breakpoint:d=650,loading:l="eager",fetchpriority:f="auto"}=g,h=l!=="eager",w=`(max-width: ${d}px)`,b=h?"data-":"";return`
          <picture>
            ${m?`<source media="${w}" type="image/webp" ${b}srcset="${m}">`:""}
            ${c?`<source media="${w}" type="image/jpeg" ${b}srcset="${c}">`:""}
            <source type="image/webp" ${b}srcset="${n}">
            <img 
              class="${p} ${h?"lazy":""}" 
              alt="${a}" 
              ${l==="eager"?'loading="eager"':""} 
              fetchpriority="${f}" 
              ${h?`data-src="${u}"`:`src="${u}"`}
            >
          </picture>
        `},i=g=>{const{title:u="EXPLORE THE BEST OF YOU.",text:n="You can choose the best option for you, and it does not matter whether you are in Prague or San Francisco.",buttonText:c="shop now"}=g;return`
          <div class="text-block">
            <div class="text-block__title">${u}</div>
            <div class="text-block__text">${n}</div>
            <button class="button button_outlined">${c}</button>
          </div>
        `},s=document.createElement("div");return s.className=`banner ${e}`.trim(),s.innerHTML=`
      <div class="banner__wrapper">
        ${o({...t,className:"banner__img"})}
        ${i(r)}
      </div>
    `,s},D=async()=>{const t=V(window.location.search),r={page:0,limit:48,sort:"price_desc"};let e={page:t.page??r.page,limit:t.limit??r.limit,sort:t.sort??r.sort};const o=a=>{const p={limit:e.limit,sort:e.sort,...a,page:0},d=_(p,r),l=P(d);l?window.location.search=l:window.location.href=window.location.pathname},i=await L.getFilters(),s=[{id:"brand",title:"Brand",type:"checkbox-list",defaultOpen:!0,options:i.brands,defaultValue:t.brand||[]},{id:"size",title:"Size (Inches)",type:"size-grid",defaultOpen:!0,options:i.sizes,defaultValue:t.size||[]},{id:"length",title:"Dress length",type:"checkbox-list",defaultOpen:!0,options:i.lengths,defaultValue:t.length||[]},{id:"color",title:"Color",type:"color-grid",defaultOpen:!0,options:i.colors,defaultValue:t.color||[]},{id:"price",title:"Price",type:"price-range",defaultOpen:!0,options:i.priceRange,defaultValue:t.price||null}],g=new z(".products__aside",s,{showSelectedFilters:!0});y(".products__sort",{options:[{value:"new",label:"Newest"},{value:"price_asc",label:"Price (Low to High)"},{value:"price_desc",label:"Price (High to Low)"}],defaultValue:e.sort,onChange:a=>o({...t,sort:a})}),y(".products__limit",{options:[{value:"48",label:"48"},{value:"24",label:"24"},{value:"8",label:"8"}],defaultValue:String(e.limit),onChange:a=>o({...t,limit:Number(a)})}),g.onApply(a=>{o(a)});const u=a=>{const p={...t,page:a},d=_(p,r),l=P(d),f=l?`?${l}`:window.location.pathname;window.history.pushState({path:f},"",f)};let n=e.page;const c=async()=>{const{data:a,count:p}=await O.getAllProducts({...t,page:n,limit:e.limit,sort:e.sort});console.log("data",a),m.appendProducts(a);const d=Math.floor(a.length/2);q(".catalog__list",d),(n!==e.page||n>0)&&u(n),(n+1)*e.limit>=p?m.hideLoadMore():m.showLoadMore(),n++},m=new B(".products__list",[],c);await c()},H={arrayFormat:"comma",skipEmptyString:!0,skipNull:!0},P=t=>{const r={...t};return t.price&&(r.minPrice=t.price.min,r.maxPrice=t.price.max,delete r.price),S.stringify(r,H)},V=t=>{const e={...S.parse(t,{arrayFormat:"comma",parseNumbers:!0,parseBooleans:!0})};return(e.minPrice!==void 0||e.maxPrice!==void 0)&&(e.price={min:Number(e.minPrice)||0,max:Number(e.maxPrice)||0},delete e.minPrice,delete e.maxPrice),["brand","size","length","color"].forEach(i=>{e[i]&&!Array.isArray(e[i])&&(e[i]=[e[i]])}),e},_=(t,r)=>{const e={...t};return Object.keys(r).forEach(o=>{e[o]===r[o]&&delete e[o]}),e};function q(t,r){const e=document.querySelector(t);if(!e||e.querySelector(".catalog__list-banner"))return;const o=e.children,s=A({className:"catalog__list-banner full-width",pictureProps:{jpgSrc:"/images/catalog-page/hero-desktop.jpg",webpSrc:"/images/catalog-page/hero-desktop.webp",mobileJpgSrc:"/images/catalog-page/hero-mobile.jpg",mobileWebpSrc:"/images/catalog-page/hero-mobile.webp",alt:"New Collection"},textBlockProps:{title:"Shopping without limits.",text:"You can choose the best option for you, and it does not matter whether you are in Prague or San Francisco.",buttonText:"Shop Now"}});o.length===0||r>=o.length?e.appendChild(s):e.insertBefore(s,o[r])}document.addEventListener("DOMContentLoaded",async()=>{$(),C(),D(),x(),E(".lazy",{rootMargin:"200px 0px"})});
