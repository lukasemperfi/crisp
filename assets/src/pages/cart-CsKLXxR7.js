import{s as c,b as r,i as h,a as y,l as p}from"../../footer-hohNfXYL.js";import{i as f}from"../../dropdown-Etj7YRTy.js";import{C as b}from"../../cart-P2wrdHJb.js";import{Q as _}from"../../map-products-to-table-rows-D6tuKD9a.js";import{c as u}from"../../helpers-DngjoxpT.js";const C=async()=>{const o=[{key:"productName",label:"Товар",type:"text",width:"max-content",align:"left"},{key:"quantity",label:"Кол-во",type:"component",render:t=>new _(t.quantity,t.id).element,width:"max-content"},{key:"price",label:"Цена за товар",type:"currency",width:"max-content",render:t=>u(t.price,"грн.")},{key:"total",label:"Итоговая стоимость",type:"currency",width:"max-content",render:t=>u(t.total,"грн.")}],d={leftAction:{type:"button",text:"Продолжить покупки",icon:"back",className:"button_secondary button_size-sm",href:`${r}catalog/`},rightGroup:[{type:"total",text:"Всего",amountKey:"totalAmount",unit:"грн."},{type:"button",text:"Оформить заказ",className:"button_primary button_size-lg order-link",href:`${r}checkout/`}]},e=document.querySelector(".cart-section__page-container"),l=document.getElementById("loader-spinner");try{b({container:e,columns:o,footer:d,onChange:()=>{const n=e.querySelector(".order-link");c.subscribe("auth",i=>{i.isAuth?n&&n.classList.remove("disabled-link"):n&&n.classList.add("disabled-link")})}});let t=null;c.subscribe("auth",n=>{const i=n.isAuth,a=e.querySelector(".auth-item");if(t=i,i)a&&e.removeChild(a);else if(!a){const s=m();e.appendChild(s)}}),c.subscribe("cart",n=>{const i=n.items.length===0,a=e.querySelector(".auth-item");if(i)a&&e.removeChild(a);else if(!a&&!t){const s=m();e.appendChild(s)}})}catch(t){console.error("Ошибка при инициализации корзины:",t)}finally{l&&l.classList.add("hidden"),e&&e.classList.remove("hidden")}};function m(){const o=document.createElement("div");return o.className="auth-item",o.innerHTML=`
      <div class="auth-item__title">Для оформления заказа необходимо</div>
      <div class="auth-item__links">
          <a href="${r}login/" class="auth-item__link">Авторизоваться</a>
          или 
          <a href="${r}registration/" class="auth-item__link">Зарегистрироваться</a>
      </div>
  `,o}document.addEventListener("DOMContentLoaded",async()=>{f({selector:".top-header__lang"}),h(),C(),y(),p(".lazy",{rootMargin:"200px 0px"})});
