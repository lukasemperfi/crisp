import{i as v,a as A,l as S}from"../core-BLSz-6hf.js";import{i as W,E as O,q as P,p as B,F as V}from"../base-cYokGfmR.js";import{N as T,P as F,a as L,p as m}from"../product-list-Cfs14K5W.js";import{c as D,i as f,r as M}from"../product-slider-C1HXpHY0.js";const N=()=>{W(".hero-slider",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,initialSlide:1,speed:600,preventClicks:!0,slidesPerView:"2",loop:!0,coverflowEffect:{rotate:0,stretch:65,depth:163,modifier:1,slideShadows:!1},breakpoints:{0:{coverflowEffect:{stretch:52}},550:{coverflowEffect:{stretch:65}}},modules:[O,T,F],navigation:{prevEl:".hero-slider__nav-left",nextEl:".hero-slider__nav-right"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(i,t){return`<span class="${t}"></span>`}}})};function z(i,t=500){let e;return function(...a){const o=this;clearTimeout(e),e=setTimeout(()=>{i.apply(o,a)},t)}}const y=i=>{const t={...i};return i.price&&(t.minPrice=i.price.min,t.maxPrice=i.price.max,delete t.price),P.stringify(t,{arrayFormat:"comma",skipEmptyString:!0,skipNull:!0})},C=i=>{const e={...P.parse(i,{arrayFormat:"comma",parseNumbers:!0,parseBooleans:!0})};return(e.minPrice!==void 0||e.maxPrice!==void 0)&&(e.price={min:Number(e.minPrice)||0,max:Number(e.maxPrice)||0},delete e.minPrice,delete e.maxPrice),["brand","size","length","color","tag"].forEach(o=>{e[o]&&!Array.isArray(e[o])&&(e[o]=[e[o]])}),e},b=(i,t)=>{const e={...i};return Object.keys(t).forEach(a=>{e[a]===t[a]&&delete e[a]}),e},$=async()=>{const i=C(window.location.search),t={page:0},e={page:i.page??t.page,limit:8,sort:void 0};let a=!0;const o=s=>{const r={...s,page:0},u=b(r,t),l=y(u);l?window.location.search=l:window.location.href=window.location.pathname},c=[{id:"tag",title:"Shop Some Wear:",type:"checkbox-list",defaultOpen:!0,options:await B.getTags(),defaultValue:i.tag||[],accordion:!1,singleSelect:!0}],p=new V(".products__aside",c,{showSelectedFilters:!1,showApplyButton:!1,showAboutDresses:!1}),_=z(s=>{o(s)},1e3);p.onChange(s=>{_(s)});const x=s=>{const r={...i,page:s},u=b(r,t),l=y(u),h=l?`?${l}`:window.location.pathname;window.history.pushState({path:h},"",h)},d=new L(".products__list",[]),g=D({initialPage:e.page,limit:e.limit,getData:({page:s,limit:r})=>m.getAllProducts({...i,page:s,limit:r,sort:e.sort}),onData:s=>{console.log(s),d.appendProducts(s),d.showLoadMore()},onEnd:()=>{d.hideLoadMore()},onPageChange:s=>{if(console.log("page",s),a){a=!1;return}x(s)}});d.setLoadMoreHandler(g.loadNext),await g.loadNext(),a=!1},k=async()=>{const i={totalLimit:16,pageSizeMobile:4,swiperOptions:{breakpoints:{471:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20},1920:{slidesPerView:5,spaceBetween:27}}}};f({...i,containerSelector:".featured-slider__slider-container",fetchProducts:m.getFeaturedProducts,navSelectors:{prevEl:".featured-slider__left-nav",nextEl:".featured-slider__right-nav"}}),f({...i,containerSelector:".popular-slider__slider-container",fetchProducts:m.getPopularProducts,navSelectors:{prevEl:".popular-slider__left-nav",nextEl:".popular-slider__right-nav"}})},q=()=>{let t={featured:null};const e={loop:!0,modules:[T],breakpoints:{500:{slidesPerView:2,spaceBetween:10},900:{slidesPerView:3,spaceBetween:14},1400:{slidesPerView:4,spaceBetween:20}}},a=()=>{window.innerWidth<=470?(Object.keys(t).forEach(n=>{t[n]&&(t[n].destroy(!0,!0),t[n]=null)}),I({posts:w,container:".blog-slider__slider-container",limit:4})):t.featured=M({container:".blog-slider__slider-container",items:w,renderItem:n=>E(n),swiperOptions:{...e,navigation:{prevEl:".blog-slider__left-nav",nextEl:".blog-slider__right-nav"}}})};a(),window.addEventListener("resize",()=>{const o=window.innerWidth<=470,n=!t.featured;o!==n&&a()})};function E({type:i,title:t,text:e,date:a,author:o}){const n=document.createElement("article");return n.className=`blog-card blog-card_${i}`,n.innerHTML=`
    <div class="blog-card__badge">${i==="article"?"Article":"Tips"}</div>
    <div class="blog-card__content">
      <h3 class="blog-card__title">${t}</h3>
      <p class="blog-card__text">${e}</p>
      <div class="blog-card__meta">
        <span class="blog-card__date">${a}</span>
        <span class="blog-card__author">by ${o}</span>
      </div>
    </div>
  `,n}function I({posts:i,container:t,limit:e}){const a=document.querySelector(t);if(!a){console.error(`renderBlogList: контейнер "${t}" не найден.`);return}a.innerHTML="";const o=i.slice(0,e),n=document.createElement("div");n.className="blog-list",o.forEach(c=>{const p=E(c);n.appendChild(p)}),a.appendChild(n)}const w=[{id:1,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"21 January 2018",author:"guido"},{id:2,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"22 January 2018",author:"admin"},{id:3,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"05 February 2018",author:"marcia"},{id:4,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"12 February 2018",author:"guido"},{id:5,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"01 March 2018",author:"elena"},{id:6,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"15 March 2018",author:"admin"},{id:7,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"10 April 2018",author:"guido"},{id:8,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"25 April 2018",author:"marcia"}];document.addEventListener("DOMContentLoaded",async()=>{v(),N(),$(),k(),q(),A(),S(".lazy",{rootMargin:"200px 0px"})});
