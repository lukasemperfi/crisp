import{d as x,p as m,i as A,a as S,l as W}from"../footer-mnrRef1t.js";import{i as O,E as B,q as P,p as V,F}from"../base-6o9kuGor.js";import{N as T,P as L,a as D}from"../product-list-2D0aSmFL.js";import{c as M,i as f,r as N}from"../product-slider-BIsMQVXp.js";const z=()=>{O(".hero-slider",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,initialSlide:1,speed:600,preventClicks:!0,slidesPerView:"2",loop:!0,coverflowEffect:{rotate:0,stretch:65,depth:163,modifier:1,slideShadows:!1},breakpoints:{0:{coverflowEffect:{stretch:52}},550:{coverflowEffect:{stretch:65}}},modules:[B,T,L],navigation:{prevEl:".hero-slider__nav-left",nextEl:".hero-slider__nav-right"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(i,e){return`<span class="${e}"></span>`}}})},y=i=>{const e={...i};return i.price&&(e.minPrice=i.price.min,e.maxPrice=i.price.max,delete e.price),P.stringify(e,{arrayFormat:"comma",skipEmptyString:!0,skipNull:!0})},C=i=>{const t={...P.parse(i,{arrayFormat:"comma",parseNumbers:!0,parseBooleans:!0})};return(t.minPrice!==void 0||t.maxPrice!==void 0)&&(t.price={min:Number(t.minPrice)||0,max:Number(t.maxPrice)||0},delete t.minPrice,delete t.maxPrice),["brand","size","length","color","tag"].forEach(o=>{t[o]&&!Array.isArray(t[o])&&(t[o]=[t[o]])}),t},b=(i,e)=>{const t={...i};return Object.keys(e).forEach(a=>{t[a]===e[a]&&delete t[a]}),t},$=async()=>{const i=C(window.location.search),e={page:0},t={page:i.page??e.page,limit:8,sort:void 0};let a=!0;const o=s=>{const r={...s,page:0},u=b(r,e),l=y(u);l?window.location.search=l:window.location.href=window.location.pathname},c=[{id:"tag",title:"Shop Some Wear:",type:"checkbox-list",defaultOpen:!0,options:await V.getTags(),defaultValue:i.tag||[],accordion:!1,singleSelect:!0}],p=new F(".products__aside",c,{showSelectedFilters:!1,showApplyButton:!1,showAboutDresses:!1}),_=x(s=>{o(s)},1e3);p.onChange(s=>{_(s)});const v=s=>{const r={...i,page:s},u=b(r,e),l=y(u),h=l?`?${l}`:window.location.pathname;window.history.pushState({path:h},"",h)},d=new D(".products__list",[]),g=M({initialPage:t.page,limit:t.limit,getData:({page:s,limit:r})=>m.getAllProducts({...i,page:s,limit:r,sort:t.sort}),onData:s=>{console.log(s),d.appendProducts(s),d.showLoadMore()},onEnd:()=>{d.hideLoadMore()},onPageChange:s=>{if(console.log("page",s),a){a=!1;return}v(s)}});d.setLoadMoreHandler(g.loadNext),await g.loadNext(),a=!1},k=async()=>{const i={totalLimit:16,pageSizeMobile:4,swiperOptions:{breakpoints:{471:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20},1920:{slidesPerView:5,spaceBetween:27}}}};f({...i,containerSelector:".featured-slider__slider-container",fetchProducts:m.getFeaturedProducts,navSelectors:{prevEl:".featured-slider__left-nav",nextEl:".featured-slider__right-nav"}}),f({...i,containerSelector:".popular-slider__slider-container",fetchProducts:m.getPopularProducts,navSelectors:{prevEl:".popular-slider__left-nav",nextEl:".popular-slider__right-nav"}})},q=()=>{let e={featured:null};const t={loop:!0,modules:[T],breakpoints:{500:{slidesPerView:2,spaceBetween:10},900:{slidesPerView:3,spaceBetween:14},1400:{slidesPerView:4,spaceBetween:20}}},a=()=>{window.innerWidth<=470?(Object.keys(e).forEach(n=>{e[n]&&(e[n].destroy(!0,!0),e[n]=null)}),U({posts:w,container:".blog-slider__slider-container",limit:4})):e.featured=N({container:".blog-slider__slider-container",items:w,renderItem:n=>E(n),swiperOptions:{...t,navigation:{prevEl:".blog-slider__left-nav",nextEl:".blog-slider__right-nav"}}})};a(),window.addEventListener("resize",()=>{const o=window.innerWidth<=470,n=!e.featured;o!==n&&a()})};function E({type:i,title:e,text:t,date:a,author:o}){const n=document.createElement("article");return n.className=`blog-card blog-card_${i}`,n.innerHTML=`
    <div class="blog-card__badge">${i==="article"?"Article":"Tips"}</div>
    <div class="blog-card__content">
      <h3 class="blog-card__title">${e}</h3>
      <p class="blog-card__text">${t}</p>
      <div class="blog-card__meta">
        <span class="blog-card__date">${a}</span>
        <span class="blog-card__author">by ${o}</span>
      </div>
    </div>
  `,n}function U({posts:i,container:e,limit:t}){const a=document.querySelector(e);if(!a){console.error(`renderBlogList: контейнер "${e}" не найден.`);return}a.innerHTML="";const o=i.slice(0,t),n=document.createElement("div");n.className="blog-list",o.forEach(c=>{const p=E(c);n.appendChild(p)}),a.appendChild(n)}const w=[{id:1,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"21 January 2018",author:"guido"},{id:2,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"22 January 2018",author:"admin"},{id:3,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"05 February 2018",author:"marcia"},{id:4,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"12 February 2018",author:"guido"},{id:5,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"01 March 2018",author:"elena"},{id:6,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"15 March 2018",author:"admin"},{id:7,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"10 April 2018",author:"guido"},{id:8,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"25 April 2018",author:"marcia"}];document.addEventListener("DOMContentLoaded",async()=>{A(),z(),$(),k(),q(),S(),W(".lazy",{rootMargin:"200px 0px"})});
