import{P as B,S as N,i as O,a as V,l as D}from"../color-CyiGwVGT.js";import{i as C,E as F,N as w,q as _,p as z,F as k,P as A,a as b,c as $}from"../base-CBqjAGzD.js";const H=()=>{C(".hero-slider",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,initialSlide:1,speed:600,preventClicks:!0,slidesPerView:"2",loop:!0,coverflowEffect:{rotate:0,stretch:65,depth:163,modifier:1,slideShadows:!1},breakpoints:{0:{coverflowEffect:{stretch:52}},550:{coverflowEffect:{stretch:65}}},modules:[F,w,B],navigation:{prevEl:".hero-slider__nav-left",nextEl:".hero-slider__nav-right"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(i,e){return`<span class="${e}"></span>`}}})};function I(i,e=500){let t;return function(...n){const a=this;clearTimeout(t),t=setTimeout(()=>{i.apply(a,n)},e)}}const E=i=>{const e={...i};return i.price&&(e.minPrice=i.price.min,e.maxPrice=i.price.max,delete e.price),_.stringify(e,{arrayFormat:"comma",skipEmptyString:!0,skipNull:!0})},q=i=>{const t={..._.parse(i,{arrayFormat:"comma",parseNumbers:!0,parseBooleans:!0})};return(t.minPrice!==void 0||t.maxPrice!==void 0)&&(t.price={min:Number(t.minPrice)||0,max:Number(t.maxPrice)||0},delete t.minPrice,delete t.maxPrice),["brand","size","length","color","tag"].forEach(a=>{t[a]&&!Array.isArray(t[a])&&(t[a]=[t[a]])}),t},T=(i,e)=>{const t={...i};return Object.keys(e).forEach(n=>{t[n]===e[n]&&delete t[n]}),t},S=({initialPage:i=0,limit:e=24,getData:t,onData:n,onEnd:a,onPageChange:s})=>{let r=i,c=!1,l=!0;return{loadNext:async()=>{if(c||!l)return;c=!0;const{data:p,count:o}=await t({page:r,limit:e});n(p);const u=(r+1)*e>=o;r++,s?.(r),u&&(l=!1,a?.()),c=!1},reset:()=>{r=i,l=!0},hasMore:()=>l}},U=async()=>{const i=q(window.location.search),e={page:0},t={page:i.page??e.page,limit:8,sort:void 0};let n=!0;const a=o=>{const u={...o,page:0},f=T(u,e),m=E(f);m?window.location.search=m:window.location.href=window.location.pathname},r=[{id:"tag",title:"Shop Some Wear:",type:"checkbox-list",defaultOpen:!0,options:await z.getTags(),defaultValue:i.tag||[],accordion:!1,singleSelect:!0}],c=new k(".products__aside",r,{showSelectedFilters:!1,showApplyButton:!1,showAboutDresses:!1}),l=I(o=>{a(o)},1e3);c.onChange(o=>{l(o)});const h=o=>{const u={...i,page:o},f=T(u,e),m=E(f),g=m?`?${m}`:window.location.pathname;window.history.pushState({path:g},"",g)},d=new A(".products__list",[]),p=S({initialPage:t.page,limit:t.limit,getData:({page:o,limit:u})=>b.getAllProducts({...i,page:o,limit:u,sort:t.sort}),onData:o=>{console.log(o),d.appendProducts(o),d.showLoadMore()},onEnd:()=>{d.hideLoadMore()},onPageChange:o=>{if(console.log("page",o),n){n=!1;return}h(o)}});d.setLoadMoreHandler(p.loadNext),await p.loadNext(),n=!1},M=({container:i,items:e=[],renderItem:t,swiperOptions:n={}})=>{const a=typeof i=="string"?document.querySelector(i):i;if(!a){console.error("renderSlider: container not found");return}a.innerHTML="";const s=document.createElement("div");s.className="swiper";const r=document.createElement("div");return r.className="swiper-wrapper",e.forEach((l,h)=>{const d=document.createElement("div");d.className="swiper-slide";const p=t(l,h);p instanceof HTMLElement&&(d.appendChild(p),r.appendChild(d))}),s.appendChild(r),a.appendChild(s),new N(s,{...n})},R=470,v=async({containerSelector:i,fetchProducts:e,totalLimit:t=16,pageSizeMobile:n=4,swiperOptions:a={},navSelectors:s={}})=>{const{data:r}=await e({limit:t});let c=null,l=null,h=null,d=null;const p=()=>c?.destroy(!0,!0),o=()=>l?.clear(),u=()=>{c=M({container:i,items:r,renderItem:$,swiperOptions:{loop:!0,modules:[w],...a,navigation:s}})},f=()=>{l=new A(i),h=S({initialPage:0,limit:n,getData:({page:g,limit:y})=>{const P=g*y,L=P+y;return Promise.resolve({data:r.slice(P,L),count:r.length})},onData:g=>{l.appendProducts(g),l.showLoadMore()},onEnd:()=>l.hideLoadMore()}),l.setLoadMoreHandler(h.loadNext),h.loadNext()},m=()=>{const g=window.innerWidth<=R,y=g?"mobile":"desktop";d!==y&&(d==="mobile"&&o(),d==="desktop"&&p(),d=y,g?f():u())};return m(),window.addEventListener("resize",m),{refresh:m,getProducts:()=>r}},K=async()=>{v({containerSelector:".featured-slider__slider-container",fetchProducts:b.getFeaturedProducts,totalLimit:16,pageSizeMobile:4,swiperOptions:{breakpoints:{471:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20},1920:{slidesPerView:5,spaceBetween:27}}},navSelectors:{prevEl:".featured-slider__left-nav",nextEl:".featured-slider__right-nav"}}),v({containerSelector:".popular-slider__slider-container",fetchProducts:b.getPopularProducts,totalLimit:16,pageSizeMobile:4,swiperOptions:{breakpoints:{471:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20},1920:{slidesPerView:5,spaceBetween:27}}},navSelectors:{prevEl:".popular-slider__left-nav",nextEl:".popular-slider__right-nav"}})},j=()=>{let e={featured:null};const t={loop:!0,modules:[w],breakpoints:{500:{slidesPerView:2,spaceBetween:10},900:{slidesPerView:3,spaceBetween:14},1400:{slidesPerView:4,spaceBetween:20}}},n=()=>{window.innerWidth<=470?(Object.keys(e).forEach(s=>{e[s]&&(e[s].destroy(!0,!0),e[s]=null)}),J({posts:x,container:".blog-slider__slider-container",limit:4})):e.featured=M({container:".blog-slider__slider-container",items:x,renderItem:s=>W(s),swiperOptions:{...t,navigation:{prevEl:".blog-slider__left-nav",nextEl:".blog-slider__right-nav"}}})};n(),window.addEventListener("resize",()=>{const a=window.innerWidth<=470,s=!e.featured;a!==s&&n()})};function W({type:i,title:e,text:t,date:n,author:a}){const s=document.createElement("article");return s.className=`blog-card blog-card_${i}`,s.innerHTML=`
    <div class="blog-card__badge">${i==="article"?"Article":"Tips"}</div>
    <div class="blog-card__content">
      <h3 class="blog-card__title">${e}</h3>
      <p class="blog-card__text">${t}</p>
      <div class="blog-card__meta">
        <span class="blog-card__date">${n}</span>
        <span class="blog-card__author">by ${a}</span>
      </div>
    </div>
  `,s}function J({posts:i,container:e,limit:t}){const n=document.querySelector(e);if(!n){console.error(`renderBlogList: контейнер "${e}" не найден.`);return}n.innerHTML="";const a=i.slice(0,t),s=document.createElement("div");s.className="blog-list",a.forEach(r=>{const c=W(r);s.appendChild(c)}),n.appendChild(s)}const x=[{id:1,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"21 January 2018",author:"guido"},{id:2,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"22 January 2018",author:"admin"},{id:3,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"05 February 2018",author:"marcia"},{id:4,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"12 February 2018",author:"guido"},{id:5,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"01 March 2018",author:"elena"},{id:6,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"15 March 2018",author:"admin"},{id:7,type:"article",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"10 April 2018",author:"guido"},{id:8,type:"tips",title:"Exactly What To Wear To Every Type Of Wedding This Summer",text:"A large part of the business here is building up the 'experience'. Double-page spreads in magazines. Ads on TV. Product placement and sponsorship in golf tournaments, tennis matches and sailing competitions. All of this builds up your perception of the brand - and additionally, it costs money.",date:"25 April 2018",author:"marcia"}];document.addEventListener("DOMContentLoaded",async()=>{O(),H(),U(),K(),j(),V(),D(".lazy",{rootMargin:"200px 0px"})});
