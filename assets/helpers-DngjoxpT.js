class g{#t;#e;element;#n;constructor(t,e={}){if(!t){console.warn("TableComponent requires a container element.");return}this.#t=t,this.#e=e,this.#n=`table-${Date.now()}-${Math.floor(Math.random()*1e3)}`,this.element=this.#a(),this.#t.appendChild(this.element),this.#o(),this.render()}#a(){return p(["table",this.#n])}#s(t){return m(t)}#r(t,e){return b(t,e,this)}#l(t){return f(t)}#o(){this.element.addEventListener("quantityChange",this.#i)}#i=t=>{t.stopPropagation();const{itemId:e,newQuantity:a}=t.detail;this.element.dispatchEvent(new CustomEvent("dataUpdateRequest",{bubbles:!0,detail:{action:"updateQuantity",itemId:e,newQuantity:a}}))};update(t){this.#e={...this.#e,...t},this.render()}render(){const{columns:t=[],rows:e=[],totalAmount:a=0,footer:n={},showHeader:r=!0}=this.#e;if(this.element.innerHTML="",e.length===0){this.element.innerHTML='<div class="table__empty-message">Корзина пуста!</div>';return}if(t.length>0){const c=t.map(d=>d.width).join(" ");if(this.element.style.gridTemplateColumns=c,r){const d=this.#s(t);this.element.appendChild(d)}}else{console.warn("Table requires columns");return}const l=this.#r(e,t);this.element.appendChild(l);const o=Number(a).toFixed(2),i=this.#l({...n,totalAmount:o});this.element.appendChild(i)}}function p(s=["table"]){const t=document.createElement("div");return t.classList.add(...s),t.setAttribute("role","table"),t.setAttribute("aria-label","Dynamic Table"),t}function m(s){const t=document.createElement("div");t.classList.add("table__head"),t.setAttribute("role","rowgroup");const e=document.createElement("div");return e.classList.add("table__row","table__row_head"),e.setAttribute("role","row"),s.forEach(a=>{const n=document.createElement("div");n.classList.add("table__cell","table__cell_head");const r=a.align||"center";n.style.justifySelf=`${r}`,n.setAttribute("role","columnheader"),n.setAttribute("scope","col"),n.setAttribute("tabindex","0"),n.setAttribute("aria-sort","none"),n.textContent=a.label,n.setAttribute("data-key",a.key),e.appendChild(n)}),t.appendChild(e),t}function b(s,t,e){const a=document.createElement("div");return a.classList.add("table__body"),a.setAttribute("role","rowgroup"),s&&s.length>0&&s.forEach(n=>{const r=w(n,t,e);a.appendChild(r)}),a}function f(s){const{leftAction:t,rightGroup:e,totalAmount:a}=s,n=document.createElement("div");n.classList.add("table__footer","table-footer"),n.setAttribute("role","contentinfo");let r=!1;if(t){const l=u(t,a);l&&(l.classList.add("table-footer__left-action"),n.appendChild(l),r=!0)}if(e&&e.length>0){const l=document.createElement("div");l.classList.add("table-footer__right-group");let o=!1;e.forEach(i=>{const c=u(i,a);c&&(l.appendChild(c),o=!0)}),o&&(n.appendChild(l),r=!0)}return r?n:document.createElement("div")}function _(){return`
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M5.83332 12.832L6.65 12.0154L2.21665 7.58203H14V6.41538H2.21665L6.65 1.98203L5.83332 1.16538L0 6.99871L5.83332 12.832Z" fill="#337D5A"/>
      </svg> 
  `}function u(s,t){let e;switch(s.type){case"button":e=document.createElement("a"),e.href=s.href||"#";const a=(s.className||"button__primary").split(" ");e.classList.add("button",...a),s.icon?e.innerHTML=`${_()} ${s.text}`:e.textContent=s.text;break;case"total":e=document.createElement("div"),e.classList.add("table-footer__total-group","total-group");const n=Number(t).toFixed(2);e.innerHTML=`
              <span class="total-group__text">${s.text}</span>
              <span class="total-group__price">${n}</span>
              <span class="total-group__unit">${s.unit}</span>
          `;break;default:return null}return e}function w(s,t,e){const a=document.createElement("div");return a.classList.add("table__row"),a.setAttribute("role","row"),a.setAttribute("tabindex","0"),t.forEach(n=>{const r=document.createElement("div");r.classList.add("table__cell"),r.setAttribute("role","cell");const l=n.align||"center";r.style.justifySelf=`${l}`;const o=n.cellClass||"";if(o&&r.classList.add(...o.split(" ")),n.render){const i=n.render(s,e);r.appendChild(i)}else{const i=s[n.key]!==void 0?String(s[n.key]):"";r.textContent=i}a.appendChild(r)}),a}class h{#t=[];constructor(t){this.setRows(t)}setRows(t){this.#t=[...t]}getRows(){return[...this.#t]}static calculateRowTotal(t,e){const a=parseFloat(t),n=parseFloat(e);return isNaN(a)||isNaN(n)||a<0||n<0?(console.error("Некорректные данные для расчета суммы строки."),0):a*n}calculateTotalAmount(){const t=this.#t.reduce((e,a)=>{const n=parseFloat(a.total)||0;return e+n},0);return Math.round(t*100)/100}updateQuantity(t,e){const a=this.#t.map(n=>{if(n.id===t){const r=h.calculateRowTotal(e,n.price);return{...n,quantity:e,total:r}}return n});return this.setRows(a),a}}function y(s,t){const e=document.createElement("div");e.classList.add("currency-cell");const a=Number(s).toFixed(2);return e.innerHTML=`
        <span class="currency-cell__amount">${a}</span>
        <span class="currency-cell__unit">${t}</span>
    `,e}export{h as T,g as a,y as c};
