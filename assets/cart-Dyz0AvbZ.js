import{T,a as b}from"./helpers-DngjoxpT.js";import{s as i}from"./footer-DhrWEGpA.js";import{m as f}from"./map-products-to-table-rows-D6tuKD9a.js";function E({container:r,columns:d=[],footer:l={},showHeader:u=!0,onChange:c}){const t=document.createElement("div");t.classList.add("cart");const m=[],a=new T(m),p={columns:d,rows:a.getRows(),totalAmount:a.calculateTotalAmount(),footer:l,showHeader:u},w=new b(t,p);r.appendChild(t),t.addEventListener("dataUpdateRequest",o=>{const{action:e,itemId:n,newQuantity:s}=o.detail;e==="updateQuantity"&&i.dispatch({type:"cart/setQuantity",payload:{productId:String(n),quantity:s}})}),i.subscribe("cart",async o=>{const e=o.items,n=o.products,s=f(n,e);a.setRows(s);const y=a.calculateTotalAmount();w.update({rows:s,totalAmount:y}),c&&c()})}export{E as C};
