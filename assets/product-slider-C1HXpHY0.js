import{S as L,a as N,c as P,N as v}from"./product-list-Cfs14K5W.js";const y=({initialPage:n=0,limit:i=24,getData:p,onData:u,onEnd:s,onPageChange:r})=>{let e=n,a=!1,t=!0;return{loadNext:async()=>{if(a||!t)return;a=!0;const{data:l,count:m}=await p({page:e,limit:i});u(l);const f=(e+1)*i>=m;e++,r?.(e),f&&(t=!1,s?.()),a=!1},reset:()=>{e=n,t=!0},hasMore:()=>t}},b=({container:n,items:i=[],renderItem:p,swiperOptions:u={}})=>{const s=typeof n=="string"?document.querySelector(n):n;if(!s){console.error("renderSlider: container not found");return}s.innerHTML="";const r=document.createElement("div");r.className="swiper";const e=document.createElement("div");return e.className="swiper-wrapper",i.forEach((t,d)=>{const o=document.createElement("div");o.className="swiper-slide";const l=p(t,d);l instanceof HTMLElement&&(o.appendChild(l),e.appendChild(o))}),r.appendChild(e),s.appendChild(r),new L(r,{...u})},x=470,S=async({containerSelector:n,fetchProducts:i,totalLimit:p=16,pageSizeMobile:u=4,swiperOptions:s={},navSelectors:r={}})=>{const{data:e}=await i({limit:p});let a=null,t=null,d=null,o=null;const l=()=>a?.destroy(!0,!0),m=()=>t?.clear(),f=()=>{a=b({container:n,items:e,renderItem:P,swiperOptions:{loop:!0,modules:[v],...s,navigation:r}})},h=()=>{t=new N(n),d=y({initialPage:0,limit:u,getData:({page:c,limit:w})=>{const g=c*w,E=g+w;return Promise.resolve({data:e.slice(g,E),count:e.length})},onData:c=>{t.appendProducts(c),t.showLoadMore()},onEnd:()=>t.hideLoadMore()}),t.setLoadMoreHandler(d.loadNext),d.loadNext()},M=()=>{const c=window.innerWidth<=x,w=c?"mobile":"desktop";o!==w&&(o==="mobile"&&m(),o==="desktop"&&l(),o=w,c?h():f())};return M(),window.addEventListener("resize",M),{refresh:M,getProducts:()=>e}};export{y as c,S as i,b as r};
