const C=({items:b=null,selector:S,onChange:_,defaultValues:f=[],disabled:A=!1,multiple:E=!1})=>{const n=document.querySelector(S),g=n.dataset.multiple==="true",r=n.querySelector(".dropdown__button"),s=n.querySelector(".dropdown__selected"),i=n.querySelector("select"),u=n.querySelector(".dropdown__dropdown"),v=e=>e.map(t=>`
        <li class="dropdown__option" role="option" data-value="${t.value}">
          <div class="dropdown__label">${t.label}</div>
          ${E?'<span class="dropdown__checkbox"></span>':""}
        </li>`).join("");b!==null&&(u.innerHTML=v(b));let l=n.querySelectorAll(".dropdown__option");r.disabled=A;const m=e=>{e?r.disabled=!0:r.disabled=!1};let o=[];const x=()=>{const e=r.getAttribute("aria-expanded")==="true";r.setAttribute("aria-expanded",String(!e))},h=()=>{r.setAttribute("aria-expanded","false")},d=()=>{const e=o.map(t=>t.querySelector(".dropdown__label").textContent.trim());s.textContent=e.length>0?e.join(", "):s.dataset.placeholder||"Select...",i&&(l.forEach(t=>{const a=t.dataset.value,p=t.querySelector(".dropdown__label").textContent.trim(),c=document.createElement("option");c.value=a,c.textContent=p,t.getAttribute("aria-selected")==="true"&&(c.selected=!0),i.appendChild(c)}),i.dispatchEvent(new Event("change")))},w=e=>{const t=e.getAttribute("aria-selected")==="true";g?t?(e.setAttribute("aria-selected","false"),o=o.filter(a=>a!==e)):(e.setAttribute("aria-selected","true"),o.push(e)):(l.forEach(a=>a.removeAttribute("aria-selected")),e.setAttribute("aria-selected","true"),o=[e],h()),d()};return r.addEventListener("click",x),u.addEventListener("click",e=>{const t=e.target.closest(".dropdown__option");if(t&&(e.stopPropagation(),w(t),_)){const a=t.dataset.value,p=n.dataset.name;_(p,a)}}),document.addEventListener("click",e=>{n.contains(e.target)||h()}),s.dataset.placeholder=s.textContent.trim(),f.length>0&&(l.forEach(e=>{const t=e.dataset.value;f.includes(t)&&(e.setAttribute("aria-selected","true"),o.push(e))}),d()),{reset:()=>{l.forEach(e=>e.removeAttribute("aria-selected")),o=[],d()},updateOptions:e=>{u.innerHTML=v(e),l=n.querySelectorAll(".dropdown__option"),o=[],d(),l.forEach(t=>{t.addEventListener("click",()=>{w(t)})})},setDisabled:m}};export{C as i};
