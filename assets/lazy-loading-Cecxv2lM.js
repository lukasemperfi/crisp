function v(s=".lazy",t={}){const r={...{root:null,rootMargin:"0px",threshold:.01},...t},e=document.querySelectorAll(s);if("IntersectionObserver"in window){let a=e.length;const u=(o,d)=>{o.forEach(l=>{if(l.isIntersecting){const i=l.target;n(i,s);const f=i.closest("picture");f&&f.querySelectorAll("source[data-srcset]").forEach(b=>n(b,s)),d.unobserve(i),a--,a===0&&d.disconnect()}})},p=new IntersectionObserver(u,r);e.forEach(o=>{p.observe(o)})}else e.forEach(a=>n(a,s))}function n(s,t){const c=s.tagName.toLowerCase()==="iframe",r="/crisp/";s.dataset.src&&(s.src=c?s.dataset.src:r+s.dataset.src.replace(/^\/+/,""),delete s.dataset.src),s.dataset.srcset&&(s.srcset=c?s.dataset.srcset:r+s.dataset.srcset.replace(/^\/+/,""),delete s.dataset.srcset),s.classList.contains(t.replace(".",""))&&s.classList.remove(t.replace(".",""))}export{v as l};
